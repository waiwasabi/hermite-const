# Table of Contents
- [Table of Contents](#table-of-contents)
  - [Description](#description)
  - [Quick Start](#quick-start)
  - [Getting Started](#getting-started)
    - [Prerequisites](#prerequisites)
    - [Installing](#installing)
    - [Building the Project](#building-the-project)
  - [Usage](#usage)
    - [Examples](#examples)
    - [Bash Script](#bash-script)
  - [Documentation](#documentation)
    - [`all`](#all)
    - [`sym`](#sym)
  - [Contributing](#contributing)
  - [References](#references)

## Description

This project implements a heuristic search on the $\mathfrak{U}(p)$ space of lattices, as described in Hlawka et al. [[1]](#1), to find dense lattice packings of equal hyperspheres.

## Quick Start

This section assumes that the dependencies
 - C++11
 - NTL 11.5.1

are installed on the user's machine. See [here](#getting-started) for instructions on installing NTL.

Run

```
bash run.sh example.txt
```

To run an example search using parameters specified in the `example.txt` file.

See [here](#usage) for the full list of parameters that may be specified. See [here](#documentation) for a description of available search algorithms.

## Getting Started

The following instructions describe the basic steps required to download the project and its dependencies on a Unix machine.

### Prerequisites

 - C++11
 - NTL 11.5.1

Install Victor Shoup's [NTL](https://libntl.org/) library. The project was tested with `ntl-11.5.1`, the latest version as of July 2024.

A quick-start overview of the installation process is provided below. Detailed installation options can be found in the full documentation [here](https://libntl.org/doc/tour-unix.html). 

Begin by downloading `ntl-11.5.1.tar.gz` from the official website. To install a different version, replace `11.5.1` with the desired version number.

```
% wget https://libntl.org/ntl-11.5.1.tar.gz
% gunzip ntl-11.5.1.tar.gz
% tar xf ntl-11.5.1.tar
```

Navigate to the `src` folder of the directory that was just extracted:
```
% cd ntl-11.5.1/src
```

The following commands will build, test, and install `ntl-11.5.1` in `/usr/local`. 
```
% ./configure
% make
% make check
% sudo make install
```

**NOTE:** if superuser privileges are not available, it is possible to install NTL in `$HOME` by specifying a prefix in the configuration script.  The following commands will install the library in `$HOME/ntl` instead.

```
% ./configure PREFIX=$HOME/ntl
% make
% make check
% make install
```


### Installing 

Simply clone the repository, i.e.

```
% git clone https://github.com/waiwasabi/sphere-packing.git
```

This will copy the project to `sphere-packing`.

Alternatively, download a release directly:

```
% wget https://github.com/waiwasabi/sphere-packing/archive/refs/tags/0.1.0.zip
% unzip sphere-packing-0.1.0.zip
```

### Building the Project

The provided `Makefile` will generate a `main` executable; see [here](#usage) for usage.

```
% make
```

Remove the binaries generated by `make` like so:
```
% make clean
```

**NOTE:** if NTL was installed in the `$HOME` directory, it it necessary to modify the `Makefile` to specify the location of the library. In particular, uncomment the following line of code:

```
#NTL_DIR = /path/to/ntl
```

and replace `/path/to/NTL` with the location of the library. Then, uncomment the compiler flags below.

```
... #-I$(NTL_DIR)/include -L$(NTL_DIR)/lib
```

## Usage

Building the project produces a `main` executable. It should be used as follows:

```
./main N start [stop] [step] [svp_algorithm] [mode] [args...]
```

The program will write output to `./out/{N}/{start}-{stop}-{step}-{svp_algorithm}-{mode}.txt`. Each line of output is of the form

```
[p,length,vectors...]
```

Where `p` is the value of $p$ used to define $\mathfrak{U}(p)$, `length` is the length of the longest vector(s) identified in the search and `vectors...` is a comma-separated list of all vectors achieving that length.

See table below for a description of the parameters.

| parameter | required | default | type | description |
| :---: | :---: | :---: | :---: | :---: |
| `N` | &check; | | int | dimension to evaluate |
| `start` | &check; | | int | evaluate $p$ in range [start, stop] |
| `stop` | &cross; | `start` | int | evaluate $p$ in range [start, stop] |
| `step` | &cross; | 1 | int | the increment at which $p$ increases |
| `svp_algorithm` | &cross; | "bkz" | "lll or "bkz" | the algorithm used to approximate SVP |
| `mode` | &cross; | "all" | "all" or "sym" | determines the subset of $\mathfrak{U}(p)$ to evaluate |
| `args...` | &cross; |  |  | additional parameters to be specified |


### Examples

With $N=2$ and $p=99$, find the vectors $a\in\mathfrak{U}(p)$ achieving the maximum value of $\lambda_1(\mathfrak{B}(p, a))$
```
./main 2 99
```

With $N=3$ and *even* $p\in [2, 99]$, find the vectors $a\in\mathfrak{U}(p)$ achieving the maximum value of $\lambda_1(\mathfrak{B}(p, a))$

```
./main 3 2 99 2
```

With $N=5$ and $p\in[2,99]$, search *only* the $1/4$ corner cube of $\mathfrak{U}(p)$ for vectors $a$ achieving the maximum value of $\lambda_1(\mathfrak{B}(p, a))$ **and** use LLL reduction to estimate SVP.

```
./main 5 2 99 lll sym
```

### Bash Script
For convenience, a bash script `run.sh` is provided. It allows for the program to be run multiple times using parameters specified in an instruction file. Each line of the instruction file should be of the form

```
N start [stop] [step] [svp_algorithm] [mode] [args...]
```

and corresponds to the call

```
./main N start [stop] [step] [svp_algorithm] [mode] [args...]
```

An example file `example.txt` is provided; it contains the same examples provided in the [previous](#examples) section. To get started, run

```
bash run.sh example.txt
```

## Documentation

This section contains a description of available modes. Full documentation will be released at a later date.

### `all`

Parameters: None

Brute force search on $\mathfrak{U}(p)$ lattices. For each $a\in\mathfrak{U}(p)$, estimate the shortest vector of $\mathfrak{B}(p, a)$ and output those vectors achieving the longest length.

### `sym`

Parameters: None

Search only the vectors belonging to a $1/4$ corner of the $\mathfrak{U}(p)$ hypercube. 

## Contributing

All pull requests are welcome. Alternatively, to request a feature or report a bug, please feel free to open an issue.

## References
<a id="1">[1]</a> 
Edmund Hlawka, Rudolf Taschner, and Johannes Schoi√üengeier. Geometric and Analytic Number Theory. Universitext. Springer Berlin Heidelberg, Berlin, Heidelberg, 1991.

